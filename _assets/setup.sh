#!/usr/bin/env bash
# -*- Mode: bash -*-
# vi: set ft=bash :
#
#
# ==============================================================================
#
# Purpose:           Setup Assets
#
# Parameters:        (none) ;
#                    -----------------------------------------------------------
#                    (none) ;
#                    -----------------------------------------------------------
#
# Called From:       (script) sourced
#
# Author:            Samir Radvanski <samir.radvanski@gmail.com>
#
# Notes:             Script used to ensure that all static assets is
#                    installed and correctly setup
#
# Revision:          Last change: 01/2018 by SR :: Assets Install
#
# ==============================================================================
set -o errexit
set -o pipefail
set -o nounset
set -e

# ==============================================================================
# VARIABLES
# ==============================================================================

# ------------------------------------------------------------------------------
# VARIABLES LOADING
# ------------------------------------------------------------------------------
source ${HOME}/.dotfiles/_internal/variables/variables.sh

# ------------------------------------------------------------------------------
# VARIABLE DEFINITIONS
# ------------------------------------------------------------------------------

# @var string CWD - current working directory
# @var string FILE - current filename
CWD=${DOT_DOTFILES}/_assets
FILE="$0"

# ==============================================================================
# EXECUTION
# ==============================================================================

# ------------------------------------------------------------------------------
# VARIABLES SOURCING
# ------------------------------------------------------------------------------
for asset in ${CWD}/assets.d/*; do

    # --------------------------------------------------------------------------
    # ASSETS SETUP
    # --------------------------------------------------------------------------
    if [[ -d ${asset} ]]; then
        /bin/bash ${asset}/install.sh
    else
        /bin/bash ${asset}
    fi

done

# ------------------------------------------------------------------------------
# VARIABLES UNLOADING
# ------------------------------------------------------------------------------
unset CWD
